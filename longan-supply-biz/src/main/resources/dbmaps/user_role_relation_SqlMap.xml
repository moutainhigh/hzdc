<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="user_role_relation">
	<resultMap id="abatorgenerated_UserRoleRelationResult" class="com.longan.biz.dataobject.UserRoleRelation">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Mar 06 15:12:58 CST 2014. -->
		<result column="id" property="id" jdbcType="INTEGER" />
		<result column="user_id" property="userId" jdbcType="BIGINT" />
		<result column="role_id" property="roleId" jdbcType="INTEGER" />
		<result column="status" property="status" jdbcType="INTEGER" />
	</resultMap>
	<resultMap class="com.longan.biz.dataobject.UserInfo" id="abatorgenerated_userRoleRelationResults">
		<result column="id" jdbcType="BIGINT" property="id" />
		<result column="login_id" jdbcType="VARCHAR" property="loginId" />
		<result column="acct_id" jdbcType="BIGINT" property="acctId" />
		<result column="user_name" jdbcType="VARCHAR" property="userName" />
		<result column="compay_info" jdbcType="VARCHAR" property="compayInfo" />
		<result column="email" jdbcType="VARCHAR" property="email" />
		<result column="user_info" jdbcType="VARCHAR" property="userInfo" />
		<result column="mobile" jdbcType="VARCHAR" property="mobile" />
		<result column="addr" jdbcType="VARCHAR" property="addr" />
		<result column="area" jdbcType="VARCHAR" property="area" />
		<result column="pwd" jdbcType="VARCHAR" property="pwd" />
		<result column="referer" jdbcType="VARCHAR" property="referer" />
		<result column="status" jdbcType="INTEGER" property="status" />
		<result column="last_login_time" jdbcType="DATETIME" property="lastLoginTime" />
		<result column="last_login_ip" jdbcType="VARCHAR" property="lastLoginIp" />
		<result column="gmt_create" jdbcType="DATETIME" property="gmtCreate" />
		<result column="gmt_modify" jdbcType="DATETIME" property="gmtModify" />
		<result column="type" jdbcType="INTEGER" property="type" />
		<result column="role_id" jdbcType="INTEGER" property="roleId" />
	</resultMap>
	<sql id="abatorgenerated_Example_Where_Clause">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Mar 06 15:12:58 CST 2014. -->
		<iterate property="oredCriteria" conjunction="or" prepend="where"
			removeFirstPrepend="iterate">
			<isEqual property="oredCriteria[].valid" compareValue="true">
				(
				<iterate prepend="and" property="oredCriteria[].criteriaWithoutValue"
					conjunction="and">
					$oredCriteria[].criteriaWithoutValue[]$
				</iterate>
				<iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue"
					conjunction="and">
					$oredCriteria[].criteriaWithSingleValue[].condition$
					#oredCriteria[].criteriaWithSingleValue[].value#
				</iterate>
				<iterate prepend="and" property="oredCriteria[].criteriaWithListValue"
					conjunction="and">
					$oredCriteria[].criteriaWithListValue[].condition$
					<iterate property="oredCriteria[].criteriaWithListValue[].values"
						open="(" close=")" conjunction=",">
						#oredCriteria[].criteriaWithListValue[].values[]#
					</iterate>
				</iterate>
				<iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue"
					conjunction="and">
					$oredCriteria[].criteriaWithBetweenValue[].condition$
					#oredCriteria[].criteriaWithBetweenValue[].values[0]# and
					#oredCriteria[].criteriaWithBetweenValue[].values[1]#
				</iterate>
				)
			</isEqual>
		</iterate>
	</sql>
	<select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_UserRoleRelationResult"
		parameterClass="com.longan.biz.dataobject.UserRoleRelation">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Mar 06 15:12:58 CST 2014. -->
		select id, user_id, role_id, status
		from user_role_relation
		where id =
		#id:INTEGER#
	</select>
	<select id="abatorgenerated_selectByExample" resultMap="abatorgenerated_UserRoleRelationResult"
		parameterClass="com.longan.biz.dataobject.UserRoleRelationExample">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Mar 06 15:12:58 CST 2014. -->
		select id, user_id, role_id, status
		from user_role_relation
		<isParameterPresent>
			<include refid="user_role_relation.abatorgenerated_Example_Where_Clause" />
			<isNotNull property="orderByClause">
				order by $orderByClause$
			</isNotNull>
		</isParameterPresent>
	</select>
	<delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.longan.biz.dataobject.UserRoleRelation">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Mar 06 15:12:58 CST 2014. -->
		delete from user_role_relation
		where id = #id:INTEGER#
	</delete>
	<delete id="abatorgenerated_deleteByExample" parameterClass="com.longan.biz.dataobject.UserRoleRelationExample">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Mar 06 15:12:58 CST 2014. -->
		delete from user_role_relation
		<include refid="user_role_relation.abatorgenerated_Example_Where_Clause" />
	</delete>
	<insert id="abatorgenerated_insert" parameterClass="com.longan.biz.dataobject.UserRoleRelation">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Mar 06 15:12:58 CST 2014. -->
		insert into user_role_relation (id, user_id, role_id, status)
		values
		(#id:INTEGER#, #userId:BIGINT#, #roleId:INTEGER#, #status:INTEGER#)
	</insert>
	<update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.longan.biz.dataobject.UserRoleRelation">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Mar 06 15:12:58 CST 2014. -->
		update user_role_relation
		set user_id = #userId:BIGINT#,
		role_id =
		#roleId:INTEGER#,
		status = #status:INTEGER#
		where id = #id:INTEGER#
	</update>
	<update id="abatorgenerated_updateByPrimaryKeySelective"
		parameterClass="com.longan.biz.dataobject.UserRoleRelation">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Mar 06 15:12:58 CST 2014. -->
		update user_role_relation
		<dynamic prepend="set">
			<isNotNull prepend="," property="userId">
				user_id = #userId:BIGINT#
			</isNotNull>
			<isNotNull prepend="," property="roleId">
				role_id = #roleId:INTEGER#
			</isNotNull>
			<isNotNull prepend="," property="status">
				status = #status:INTEGER#
			</isNotNull>
		</dynamic>
		where id = #id:INTEGER#
	</update>
	<select id="abatorgenerated_countByExample" parameterClass="com.longan.biz.dataobject.UserRoleRelationExample"
		resultClass="java.lang.Integer">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Mar 06 15:12:58 CST 2014. -->
		select count(*) from user_role_relation
		<include refid="user_role_relation.abatorgenerated_Example_Where_Clause" />
	</select>
	<update id="abatorgenerated_updateByExampleSelective">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Mar 06 15:12:58 CST 2014. -->
		update user_role_relation
		<dynamic prepend="set">
			<isNotNull prepend="," property="record.id">
				id = #record.id:INTEGER#
			</isNotNull>
			<isNotNull prepend="," property="record.userId">
				user_id =
				#record.userId:BIGINT#
			</isNotNull>
			<isNotNull prepend="," property="record.roleId">
				role_id =
				#record.roleId:INTEGER#
			</isNotNull>
			<isNotNull prepend="," property="record.status">
				status =
				#record.status:INTEGER#
			</isNotNull>
		</dynamic>
		<isParameterPresent>
			<include refid="user_role_relation.abatorgenerated_Example_Where_Clause" />
		</isParameterPresent>
	</update>
	<update id="abatorgenerated_updateByExample">
		<!-- WARNING - This element is automatically generated by Abator for iBATIS, 
			do not modify. This element was generated on Thu Mar 06 15:12:58 CST 2014. -->
		update user_role_relation
		set id = #record.id:INTEGER#,
		user_id =
		#record.userId:BIGINT#,
		role_id = #record.roleId:INTEGER#,
		status =
		#record.status:INTEGER#
		<isParameterPresent>
			<include refid="user_role_relation.abatorgenerated_Example_Where_Clause" />
		</isParameterPresent>
	</update>
	<delete id="abatorgenerated_deleteByUserId" parameterClass="com.longan.biz.dataobject.UserRoleRelation">
		delete from user_role_relation
		where user_id = #userId:INTEGER#
	</delete>
	<sql id="userRoleRelationConditions">
		<dynamic prepend="where">
			<isNotEmpty prepend="and" property="id">
				ui.id =
				#id#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="loginId">
				ui.login_Id =
				#loginId#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="acctId">
				ui.acct_id =
				#acctId#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="userName">
				ui.user_name like
				CONCAT('%', #userName#, '%')
			</isNotEmpty>
			<isNotEmpty prepend="and" property="status">
				ui.status =
				#status#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="type">
				ui.type =
				#type#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="startGmtCreate">
				ui.gmt_create &gt;
				#startGmtCreate#
			</isNotEmpty>
			<isNotEmpty prepend="and" property="endGmtCreate">
				ui.gmt_create &lt;
				DATE_ADD(#endGmtCreate#,INTERVAL 1 DAY)
			</isNotEmpty>
			<isNotEmpty prepend="and" property="roleId">
				urr.role_id =
				#roleId#
			</isNotEmpty>
		</dynamic>
	</sql>
	<sql id="userRoleRelationQueryColumns">
		ui.id, ui.login_id, ui.acct_id, ui.user_name,
		ui.compay_info,
		ui.email,
		ui.user_info, ui.mobile, ui.addr, ui.area,
		ui.pwd,
		ui.referer,
		ui.status,
		ui.last_login_time,
		ui.last_login_ip,
		ui.gmt_create,
		ui.gmt_modify,ui.type, urr.role_id
	</sql>
	<select id="queryUserRoleRelationByPage" resultMap="abatorgenerated_userRoleRelationResults">
		SELECT
		<include refid="user_role_relation.userRoleRelationQueryColumns" />
		FROM
		user_info AS ui INNER JOIN user_role_relation AS urr ON ui.id =
		urr.user_id
		INNER JOIN role_info AS ri ON ri.id = urr.role_id
		<include refid="user_role_relation.userRoleRelationConditions" />
		ORDER BY
		ui.gmt_create ASC LIMIT #startRow#,#pageSize#
	</select>
	<select id="queryForPageCount" resultClass="java.lang.Integer">
		SELECT count(*) FROM
		user_info AS ui INNER JOIN user_role_relation AS
		urr ON ui.id =
		urr.user_id
		INNER JOIN role_info AS ri ON ri.id =
		urr.role_id
		<include refid="user_role_relation.userRoleRelationConditions" />
	</select>
</sqlMap>